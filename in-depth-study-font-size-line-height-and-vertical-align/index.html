<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css"><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script><script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;hiyangguo.com&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Pisces&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:true,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;},&quot;path&quot;:&quot;&#x2F;search.xml&quot;,&quot;localsearch&quot;:{&quot;enable&quot;:true,&quot;trigger&quot;:&quot;auto&quot;,&quot;top_n_per_article&quot;:1,&quot;unescape&quot;:false,&quot;preload&quot;:false}}</script><meta name="description" content="这张图展示的是8种不同的字体，其中第一、第二个分别为 font-awesome图标、自定义的字体图标，其余字体依次为Avenir、Trebuchet MS、Arial、Helvetica、Hiragino Sans GB、STXihei。源代码在这里。这些字符的font-size:100px，但是占的高度却不一样。有的是 100px，有的大于 100px。另外可以看出，垂直方向并没有居中对齐。这"><meta property="og:type" content="article"><meta property="og:title" content="深入研究CSS字体度量及CSS 盒子"><meta property="og:url" content="http://hiyangguo.com/in-depth-study-font-size-line-height-and-vertical-align/index.html"><meta property="og:site_name" content="Godfery的博客"><meta property="og:description" content="这张图展示的是8种不同的字体，其中第一、第二个分别为 font-awesome图标、自定义的字体图标，其余字体依次为Avenir、Trebuchet MS、Arial、Helvetica、Hiragino Sans GB、STXihei。源代码在这里。这些字符的font-size:100px，但是占的高度却不一样。有的是 100px，有的大于 100px。另外可以看出，垂直方向并没有居中对齐。这"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/banner.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/font-detail.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/metal-type-zoom-in.jpg"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/font-metrics.jpg"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/avenir-detial-screenshots.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/avenir-analysis.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/block-box-demo.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/inline-box-demo.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/anonymous-box-demo.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-demo.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/content-area.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-anonymous-Inline-box.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-increased-Inline-box.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-increased-font-size.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-superscript-inline-box.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-replaced-element.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-addtional-inline-box-height.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/inline-box-poke-out-line-box.png"><meta property="og:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/pants-over-prvious-line.png"><meta property="article:published_time" content="2018-04-09T15:59:26.000Z"><meta property="article:modified_time" content="2022-06-20T13:30:49.363Z"><meta property="article:author" content="Godfery"><meta property="article:tag" content="css"><meta property="article:tag" content="font"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://hiyangguo.com/uploads/in-depth-study-font-size-line-height-and-vertical-align/banner.png"><link rel="canonical" href="http://hiyangguo.com/in-depth-study-font-size-line-height-and-vertical-align/"><script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;http:&#x2F;&#x2F;hiyangguo.com&#x2F;in-depth-study-font-size-line-height-and-vertical-align&#x2F;&quot;,&quot;path&quot;:&quot;in-depth-study-font-size-line-height-and-vertical-align&#x2F;&quot;,&quot;title&quot;:&quot;深入研究CSS字体度量及CSS 盒子&quot;}</script><script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script><title>深入研究CSS字体度量及CSS 盒子 | Godfery的博客</title><script src="/js/config.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Godfery的博客</h1><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fas fa-th fa-fw"></i>分类<span class="badge">11</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>归档<span class="badge">22</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fas fa-tags fa-fw"></i>标签<span class="badge">33</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E4%BD%93%E5%BA%A6%E9%87%8F"><span class="nav-number">1.</span> <span class="nav-text">字体度量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E4%BD%93%E7%9A%84%E5%AE%9A%E4%B9%89%E8%A7%84%E5%88%99"><span class="nav-number">1.1.</span> <span class="nav-text">字体的定义规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E4%BD%93%E7%9A%84%E8%AE%BE%E7%BD%AE"><span class="nav-number">1.2.</span> <span class="nav-text">字体的设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E6%89%80%E5%8D%A0%E9%AB%98%E5%BA%A6%E7%9A%84%E8%AE%A1%E7%AE%97"><span class="nav-number">1.3.</span> <span class="nav-text">字符所占高度的计算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS-box-models"><span class="nav-number">2.</span> <span class="nav-text">CSS box models</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Block-Box-Containing-Box-%E5%9D%97%E7%9B%92%E5%AD%90-%E5%8C%85%E8%A3%B9%E7%9B%92%E5%AD%90"><span class="nav-number">2.1.</span> <span class="nav-text">Block Box&#x2F;Containing Box (块盒子&#x2F;包裹盒子)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Inline-Box-%E5%86%85%E8%81%94%E7%9B%92%E5%AD%90"><span class="nav-number">2.2.</span> <span class="nav-text">Inline Box (内联盒子)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Anonymous-Inline-Box-%E5%8C%BF%E5%90%8D%E5%86%85%E8%81%94%E7%9B%92%E5%AD%90"><span class="nav-number">2.3.</span> <span class="nav-text">Anonymous Inline Box (匿名内联盒子)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Line-Box-%E8%A1%8C%E7%9B%92%E5%AD%90"><span class="nav-number">2.4.</span> <span class="nav-text">Line Box (行盒子)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Content-area"><span class="nav-number">2.5.</span> <span class="nav-text">Content area</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inline-Box-%E4%B8%8E-Line-Box"><span class="nav-number">3.</span> <span class="nav-text">Inline Box 与 Line Box</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Inline-Box-%E5%A6%82%E4%BD%95%E5%BD%B1%E5%93%8D-Line-Box"><span class="nav-number">3.1.</span> <span class="nav-text">Inline Box 如何影响 Line Box</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Inline-Box-%E6%92%91%E7%A0%B4-Line-Box"><span class="nav-number">3.2.</span> <span class="nav-text">Inline Box 撑破 Line Box</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Godfery" src="/uploads/head.jpg"><p class="site-author-name" itemprop="name">Godfery</p><div class="site-description" itemprop="description">Godfery的博客</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">22</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">11</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">33</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/hiyangguo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hiyangguo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://juejin.im/user/5651d4a860b2ed3620acfaed" title="掘金 → https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;5651d4a860b2ed3620acfaed" rel="noopener" target="_blank"><i class="fas fa-code fa-fw"></i> 掘金</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://wangchujiang.com/FED/" title="https:&#x2F;&#x2F;wangchujiang.com&#x2F;FED&#x2F;" rel="noopener" target="_blank">JSDig</a></li><li class="links-of-blogroll-item"> <a href="https://docschina.org/" title="https:&#x2F;&#x2F;docschina.org&#x2F;" rel="noopener" target="_blank">印记中文</a></li><li class="links-of-blogroll-item"> <a href="http://www.alloyteam.com/nav/" title="http:&#x2F;&#x2F;www.alloyteam.com&#x2F;nav&#x2F;" rel="noopener" target="_blank">腾讯前端导航</a></li><li class="links-of-blogroll-item"> <a href="https://godbasin.github.io/front-end-playground/" title="https:&#x2F;&#x2F;godbasin.github.io&#x2F;front-end-playground&#x2F;" rel="noopener" target="_blank">被删的前端游乐场</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/hiyangguo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://hiyangguo.com/in-depth-study-font-size-line-height-and-vertical-align/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/head.jpg"><meta itemprop="name" content="Godfery"><meta itemprop="description" content="Godfery的博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Godfery的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 深入研究CSS字体度量及CSS 盒子</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-04-09 15:59:26" itemprop="dateCreated datePublished" datetime="2018-04-09T15:59:26+00:00">2018-04-09</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-06-20 13:30:49" itemprop="dateModified" datetime="2022-06-20T13:30:49+00:00">2022-06-20</time></span><span id="/in-depth-study-font-size-line-height-and-vertical-align/" class="post-meta-item leancloud_visitors" data-flag-title="深入研究CSS字体度量及CSS 盒子" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Disqus：</span><a title="disqus" href="/in-depth-study-font-size-line-height-and-vertical-align/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="in-depth-study-font-size-line-height-and-vertical-align/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/banner.png" alt="头图"></p><p>这张图展示的是8种不同的字体，其中第一、第二个分别为 <a target="_blank" rel="noopener" href="https://github.com/FortAwesome/Font-Awesome/tree/v4.7.0">font-awesome</a>图标、自定义的字体图标，其余字体依次为<code>Avenir</code>、<code>Trebuchet MS</code>、<code>Arial</code>、<code>Helvetica</code>、<code>Hiragino Sans GB</code>、<code>STXihei</code>。<a target="_blank" rel="noopener" href="https://codepen.io/hiyangguo/pen/VXqQMB">源代码在这里</a>。这些字符的<code>font-size:100px</code>，但是占的高度却不一样。有的是 100px，有的大于 100px。另外可以看出，垂直方向并没有居中对齐。<br>这篇文章主要研究：</p><ul><li><code>font</code> 的工作原理及度量参数</li><li><code>CSS box models</code> 的类型、定义</li></ul><span id="more"></span><h2 id="字体度量"><a href="#字体度量" class="headerlink" title="字体度量"></a>字体度量</h2><p>要弄明白上面问题的答案，需要先从字体说起：<br>我们拿出其中<code>Avenir</code>、<code>Helvetica</code>、<code>Hiragino Sans GB</code>三种字体进行分析<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/font-detail.png" alt="字体占行高"><br>由上图可知，在我们设置 <code>font-size:100px</code> 时，文字所占的高度分别为 <code>137px</code>、 <code>115px</code> 和 <code>100px</code>。<br>感觉有点懵啊。怎么 <code>font-size:100px</code> ，可是高度却由于字体不同，而不一样了呢？<br>在字体设计中一个字符所在的空间容器称为<a target="_blank" rel="noopener" href="https://designwithfontforge.com/zh-CN/The_EM_Square.html">EM Square</a>（也被称作“EM size”或者“UPM”）。</p><blockquote><p>在传统的金属字模中，这个容器就是每个字符的实际金属块。每个字符的高度是统一的，这样每个字模可以整齐地放进行和块中（如下）。</p></blockquote><p><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/metal-type-zoom-in.jpg" alt="传统的金属字模"></p><h3 id="字体的定义规则"><a href="#字体的定义规则" class="headerlink" title="字体的定义规则"></a>字体的定义规则</h3><ul><li>字母的高度被称为“<code>em</code>”，在数字化字体中 <code>em</code> 是空间的数字化定义总量。<code>em</code>的大小（以下均写为: <strong>EM size</strong>）通常是 <strong>1000</strong> 单位，在 TrueType 字体中，<code>EM size</code> 约定是2的幂，通常是1024或2048。</li><li>根据其实际使用的单位，字体的度量可以根据一些<a href="./#字体的设置">设置</a>来决定。注意，有些值是em-square之外的值。</li><li>在浏览器中，相对单位是用于缩放用来适应所需的 <code>font-size</code></li></ul><h3 id="字体的设置"><a href="#字体的设置" class="headerlink" title="字体的设置"></a>字体的设置</h3><p><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/font-metrics.jpg" alt="字体的设置"><br>这是一张详解字体设置的图例，图中各个属性的意义：</p><ul><li><code>baseline</code> (<em>基线</em>): 分隔 <code>ascent</code> 和 <code>descent</code> ，默认字符底端沿 <code>baseline</code> 排列，如图中的P，x，Ё(为俄文字符)</li><li><code>ascent</code> (<em>上升</em>): 基线的上部分，字符最高处与 <code>ascent</code> 顶端可能有空白，由 <code>font-family</code> 决定</li><li><code>descent</code> (<em>下降</em>): 基线的下部分，字符最低处与 <code>descent</code> 底端可能有空白，由 <code>font-family</code> 决定</li><li><code>xHeight</code> (<em>X 字高</em>): 小写字符 <strong>x</strong> 的高度，由 <code>font-family</code> 决定</li><li><code>capHeight</code> (<em>顶面高度</em>): 大些字符 <strong>P</strong> 的高度，由 <code>font-family</code> 决定</li><li><code>lineSpacing</code> (<em>行间距</em>): 在浏览器中一般 <code>lineSpacing = ascent + descent</code></li><li><code>lineHeight</code> （<em>行高</em>）: 默认等于 <code>lineSpacing</code>，受 <code>line-height</code> 设置影响，如果设置 <code>line-height</code>，<code>lineHeight</code> 等于 <code>line-height</code>。</li><li><code>half-leading</code> (<em>半行距</em>): 如果<code>lineHeight &gt; lineSpacing</code>，则<code>lineHeight</code> 与 <code>lineSpacing</code> 之间会产生<strong>上下相等</strong>的空隙 (lineHeight - lineSpacing)/2 称为<em>半行距</em>（<code>half-leading</code>或 <code>half lead strips</code>）。</li></ul><h3 id="字符所占高度的计算"><a href="#字符所占高度的计算" class="headerlink" title="字符所占高度的计算"></a>字符所占高度的计算</h3><p>所以在了解了上面的概念以后，就可以解答为什么在 <code>font-size:100px</code> 的时候行高却不一样的问题。<br>首先，先下载一个专业的字体软件<a target="_blank" rel="noopener" href="https://fontforge.github.io/en-US/">FontForge</a>，这个软件运行在<a target="_blank" rel="noopener" href="https://www.xquartz.org/">xquartz</a>上，所以要两个都要装。</p><blockquote><p><a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1GqI-n39GkFQWsNZ8vWKMGg">百度云通道</a></p></blockquote><p>安装后我们以 <a target="_blank" rel="noopener" href="https://github.com/hiyangguo/hiyangguo.github.io/raw/dev/source/uploads/in-depth-study-font-size-line-height-and-vertical-align/Avenir.ttf">Avenir</a> 字体为例进行分析。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/avenir-detial-screenshots.png" alt="Avenir 字体详情截屏"></p><ul><li><code>EM size</code> 为 <strong>1000</strong></li><li><code>ascent</code> 为 <strong>1000</strong> ，<code>descent</code> 为 <strong>366</strong></li><li><code>capHeight</code> 为 <strong>708</strong></li><li><code>xHeight</code> 为 <strong>468</strong></li></ul><blockquote><p>注：浏览器使用HHead Ascent/Descent值（Mac）和Win Ascent/Descent值（Windows），并且这些值可能不同。</p></blockquote><p>这意味着 <code>Avenir</code> 字体在 1000 单位的 <code>EM size</code> 中使用了 <code>1000 + 366</code> 个单位，也就是说 <code>font-size:100px</code>，其高度为 <code>100px * (1000 + 366 ) ≈ 137px</code>。<br>这个计算高度定义了 <strong><a href="#Content-area">元素内容（Content area）</a>高度</strong> 也就相当于 <code>background</code> 属性。</p><p><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/avenir-analysis.png" alt="Avenir 字体解析图"></p><h2 id="CSS-box-models"><a href="#CSS-box-models" class="headerlink" title="CSS box models"></a>CSS box models</h2><p>接下来我们深入的研究一下，<code>CSS box models</code>。你可能不知道什么<code>CSS box models</code>，不过说出来你可能不信，在实际工作当中恐怕你最常见的就是<code>CSS box models</code>。</p><h3 id="Block-Box-Containing-Box-块盒子-包裹盒子"><a href="#Block-Box-Containing-Box-块盒子-包裹盒子" class="headerlink" title="Block Box/Containing Box (块盒子/包裹盒子)"></a>Block Box/Containing Box (块盒子/包裹盒子)</h3><p>比如有一段简单的文字，就有可能会有一些列的 <code>box</code> 。那么这个段落被称为 <strong><code>Containing Box</code></strong> ，之所以这么命名，可能是因为他包含了很多 <code>box</code> 吧。（呵…）当然你也可以称之为 <strong><code>Block Box</code></strong>，因为他就是一个<strong>块</strong>。简单来说<code>Containing Box</code>和<code>Block Box</code>其实是一个东西。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/block-box-demo.png" alt="Block Box演示"></p><h3 id="Inline-Box-内联盒子"><a href="#Inline-Box-内联盒子" class="headerlink" title="Inline Box (内联盒子)"></a>Inline Box (内联盒子)</h3><p>在段落内部，有很多的 <strong><code>Inline Box</code></strong>。 这些 <code>Box</code> 不会像 <code>Block Box</code> 那样形成新的一⾏。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/inline-box-demo.png" alt="Inline Box演示"><br>在上面的例子中, <code>&lt;em/&gt;</code> 标签包裹的 <em>斜体元素</em> 就是一个典型的 <code>Inline Box</code>。</p><h3 id="Anonymous-Inline-Box-匿名内联盒子"><a href="#Anonymous-Inline-Box-匿名内联盒子" class="headerlink" title="Anonymous Inline Box (匿名内联盒子)"></a>Anonymous Inline Box (匿名内联盒子)</h3><p>在段落内部，那些没有标记的<code>Inline Box</code> 则成为 <strong><code>Anonymous inline Box</code></strong>。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/anonymous-box-demo.png" alt="Anonymous Inline Box演示"></p><h3 id="Line-Box-行盒子"><a href="#Line-Box-行盒子" class="headerlink" title="Line Box (行盒子)"></a>Line Box (行盒子)</h3><p>所有<code>Inline Box</code>在<code>Containing Box</code>紧挨着排列，则会形成 <strong><code>Line Box</code></strong>。需要注意的是，<code>Line Box</code>是没办法直观看到的。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-demo.png" alt="Line Box演示"></p><h3 id="Content-area"><a href="#Content-area" class="headerlink" title="Content area"></a>Content area</h3><p><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/content-area.png" alt="Content area"><br><strong><code>Content area</code></strong> 是围绕⽂文本的<em>隐形框</em>。 而且在字体度量这一小节我们也证明过了，它的高度由<code>font-size</code>决定。</p><blockquote><p>更详细的定义及说明可以访问 CSS 规范2.1 中关于 <strong>视觉格式化模型</strong>（<em>Visual formatting model</em>）一节进行阅读。<br><a target="_blank" rel="noopener" href="http://www.ayqy.net/doc/css2-1/visuren.html">中文站</a>|<a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS2/visuren.html">W3C 官网</a></p></blockquote><h2 id="Inline-Box-与-Line-Box"><a href="#Inline-Box-与-Line-Box" class="headerlink" title="Inline Box 与 Line Box"></a><code>Inline Box</code> 与 <code>Line Box</code></h2><h3 id="Inline-Box-如何影响-Line-Box"><a href="#Inline-Box-如何影响-Line-Box" class="headerlink" title="Inline Box 如何影响 Line Box"></a>Inline Box 如何影响 Line Box</h3><p><code>Line box</code> 的高度由 <code>Line Box</code> 中最⾼的 <code>Inline Box</code>（或<code>Replaced Element</code>）确定。<br>最⾼的 <code>Inline Box</code> 可以是⼀个 <code>Anonymous Inline Box</code>。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-anonymous-Inline-box.png" alt="line-box-with-anonymous-Inline-box"></p><p>也可能是一个增加了<code>line-height</code>的 <code>Inline Box</code>。 由于增加了 <code>line-height</code> ，所以这个它会比其它的 <code>box</code> 更高。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-increased-Inline-box.png" alt="line-box-with-increased-Inline-box"></p><p>可能是⼀个更⼤的 <code>font-size</code> 的 <code>Inline Box</code>，这使得这个 <code>Inline Box</code> ⽐其他 <code>Inline Box</code> 更高。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-increased-font-size.png" alt="line-box-with-increased-font-size"></p><p>由于浏览器器的不同，它也可能受到上标或下标的影响。 因为有些浏览器以影响<code>Line box</code>的方式渲染上标元素。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-superscript-inline-box.png" alt="line-box-with-superscript-inline-box"></p><p>我们可以通过设置 <code>&lt;sup/&gt;</code>、<code>&lt;sub/&gt;</code> 的 <code>line-height</code> 为 0 来解决这个问题。<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sub, <span class="selector-tag">sup</span> &#123; <span class="attribute">line-height</span>: <span class="number">0</span>; &#125;</span><br></pre></td></tr></table></figure><p></p><p><code>Inline Box</code> 可能受到 <code>Replaced Element</code>（如：<code>&lt;img/&gt;</code>、<code>&lt;input/&gt;</code>、<code>&lt;svg/&gt;</code>） 的影响。</p><p><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-with-replaced-element.png" alt="line-box-with-replaced-element"></p><h3 id="Inline-Box-撑破-Line-Box"><a href="#Inline-Box-撑破-Line-Box" class="headerlink" title="Inline Box 撑破 Line Box"></a>Inline Box 撑破 Line Box</h3><p>正如我们所看到的, <code>Line Box</code> 将增加所有行内 <code>Inline Box</code> 的⾼度。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/line-box-addtional-inline-box-height.png" alt="line-box-addtional-inline-box-height"><br>但是，有时候 <code>Inline Box</code> 的一部分会撑破 <code>Line Box</code> 的顶部或底部。例如一个拥有<code>padding</code>、<code>margin</code>、<code>border</code> 的 <code>Inline Box</code> 。由于 <code>Inline Box</code> 不能设定高度（设了也白设）。因此会在元素的上方和下方显示<code>padding</code>、<code>margin</code>、<code>border</code>，但并不会影响 <code>Line Box</code>。<br><strong>注意</strong>：对于<code>Replaced Element</code>、<code>inline-block</code>行内元素<code>padding</code>、<code>margin</code>、<code>border</code>都会增加高度，所以<code>Line Box</code> 的高度也会受到影响。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/inline-box-poke-out-line-box.png" alt="inline-box-poke-out-line-box"><br>浏览器将按照文档的先后顺序呈现 <code>Line Box</code>。 所以, 后续行上的 <code>border</code> 可能会覆盖上⼀行的 <code>border</code>和文本。<br><img src="/uploads/in-depth-study-font-size-line-height-and-vertical-align/pants-over-prvious-line.png" alt="pants-over-previous-line"></p><blockquote><p>参考文章<br><a target="_blank" rel="noopener" href="https://yoution.gitbooks.io/webkit/Layout/InlineElement-Vertical/">行内元素垂直方向的layout</a><br><a target="_blank" rel="noopener" href="https://www.w3cplus.com/css/css-font-metrics-line-height-and-vertical-align.html">深入了解CSS字体度量，行高和vertical-align</a><br><a target="_blank" rel="noopener" href="https://designwithfontforge.com/zh-CN/The_EM_Square.html">FontForge 与字体设计 - EM Square</a><br><a target="_blank" rel="noopener" href="https://www.w3cplus.com/sites/default/files/blogs/2017/1702/deep-dive-line-height.pdf">Deep dive line-height</a></p></blockquote></div><div class="popular-posts-header">相关文章</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/webpack-mutiple-theme-solution-md/" rel="bookmark">webpack 换肤功能多主题/配色样式打包解决方案</a></div></li></ul><footer class="post-footer"><div class="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button onclick='document.querySelector(".post-reward").classList.toggle("active")'> 赞赏</button><div class="post-reward"><div> <img src="/path/to/wechat-reward-image.png" alt="Godfery 微信"> <span>微信</span></div><div> <img src="/path/to/alipay-reward-image.png" alt="Godfery 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Godfery</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="http://hiyangguo.com/in-depth-study-font-size-line-height-and-vertical-align/" title="深入研究CSS字体度量及CSS 盒子">http://hiyangguo.com/in-depth-study-font-size-line-height-and-vertical-align/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="post-tags"> <a href="/tags/css/" rel="tag"># css</a> <a href="/tags/font/" rel="tag"># font</a></div><div class="post-nav"><div class="post-nav-item"><a href="/build-a-app-width-electron-and-react/" rel="prev" title="如何使用 Electron 和 React 构建一个 APP"><i class="fa fa-chevron-left"></i> 如何使用 Electron 和 React 构建一个 APP</a></div><div class="post-nav-item"> <a href="/webpack-mutiple-theme-solution-md/" rel="next" title="webpack 换肤功能多主题/配色样式打包解决方案">webpack 换肤功能多主题/配色样式打包解决方案<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="disqus_thread"><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script src="/js/comments.js"></script></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2016 – <span itemprop="copyrightYear">2022</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Godfery</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/third-party/search/local-search.js"></script><script class="next-config" data-name="nprogress" type="application/json">{&quot;enable&quot;:true,&quot;spinner&quot;:true}</script><script src="/js/third-party/nprogress.js"></script><script class="next-config" data-name="leancloud_visitors" type="application/json">{&quot;enable&quot;:true,&quot;app_id&quot;:&quot;2jwVI58glS0nRFUd0v7YwmSE-gzGzoHsz&quot;,&quot;app_key&quot;:&quot;BrxDua0t4Dci3dlvkby5JuJo&quot;,&quot;server_url&quot;:&quot;https:&#x2F;&#x2F;2jwvi58g.lc-cn-n1-shared.com&quot;,&quot;security&quot;:false}</script><script src="/js/third-party/statistics/lean-analytics.js"></script><script src="https://cdn.jsdelivr.net/npm/quicklink@2.1.0/dist/quicklink.umd.js"></script><script class="next-config" data-name="quicklink" type="application/json">{&quot;enable&quot;:true,&quot;home&quot;:false,&quot;archive&quot;:false,&quot;delay&quot;:true,&quot;timeout&quot;:3000,&quot;priority&quot;:true,&quot;ignores&quot;:null,&quot;url&quot;:&quot;http:&#x2F;&#x2F;hiyangguo.com&#x2F;in-depth-study-font-size-line-height-and-vertical-align&#x2F;&quot;}</script><script src="/js/third-party/quicklink.js"></script><script class="next-config" data-name="disqus" type="application/json">{&quot;enable&quot;:true,&quot;shortname&quot;:&quot;godeferyde-bo-ke&quot;,&quot;count&quot;:true,&quot;i18n&quot;:{&quot;disqus&quot;:&quot;disqus&quot;}}</script><script src="/js/third-party/comments/disqus.js"></script></body></html>