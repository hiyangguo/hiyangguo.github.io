<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css"><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script><script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;hiyangguo.com&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Pisces&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:true,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;},&quot;path&quot;:&quot;&#x2F;search.xml&quot;,&quot;localsearch&quot;:{&quot;enable&quot;:true,&quot;trigger&quot;:&quot;auto&quot;,&quot;top_n_per_article&quot;:1,&quot;unescape&quot;:false,&quot;preload&quot;:false}}</script><meta name="description" content="本文主要详细介绍了，如何使用 webpack，打包多套不同主题的解决方案以及实践中所遇到的问题及解决方案。"><meta property="og:type" content="article"><meta property="og:title" content="webpack 换肤功能多主题&#x2F;配色样式打包解决方案"><meta property="og:url" content="http://hiyangguo.com/webpack-mutiple-theme-solution-md/index.html"><meta property="og:site_name" content="Godfery的博客"><meta property="og:description" content="本文主要详细介绍了，如何使用 webpack，打包多套不同主题的解决方案以及实践中所遇到的问题及解决方案。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://hiyangguo.com/uploads/webpack-mutiple-theme-solution/pallete.jpg"><meta property="og:image" content="http://hiyangguo.com/uploads/webpack-mutiple-theme-solution/themes.png"><meta property="og:image" content="http://hiyangguo.com/uploads/webpack-mutiple-theme-solution/mix-css.png"><meta property="og:image" content="http://hiyangguo.com/uploads/webpack-mutiple-theme-solution/first-build.png"><meta property="og:image" content="http://hiyangguo.com/uploads/webpack-mutiple-theme-solution/first-build.png"><meta property="og:image" content="http://hiyangguo.com/uploads/webpack-mutiple-theme-solution/fina-build.png"><meta property="og:image" content="http://hiyangguo.com/uploads/webpack-mutiple-theme-solution/final-screenshoots.gif"><meta property="article:published_time" content="2018-04-19T19:15:52.000Z"><meta property="article:modified_time" content="2022-06-20T13:30:49.363Z"><meta property="article:author" content="Godfery"><meta property="article:tag" content="css"><meta property="article:tag" content="less"><meta property="article:tag" content="webpack"><meta property="article:tag" content="换肤"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://hiyangguo.com/uploads/webpack-mutiple-theme-solution/pallete.jpg"><link rel="canonical" href="http://hiyangguo.com/webpack-mutiple-theme-solution-md/"><script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;http:&#x2F;&#x2F;hiyangguo.com&#x2F;webpack-mutiple-theme-solution-md&#x2F;&quot;,&quot;path&quot;:&quot;webpack-mutiple-theme-solution-md&#x2F;&quot;,&quot;title&quot;:&quot;webpack 换肤功能多主题&#x2F;配色样式打包解决方案&quot;}</script><script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script><title>webpack 换肤功能多主题/配色样式打包解决方案 | Godfery的博客</title><script src="/js/config.js"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Godfery的博客</h1><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fas fa-th fa-fw"></i>分类<span class="badge">11</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>归档<span class="badge">22</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fas fa-tags fa-fw"></i>标签<span class="badge">33</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B5%B7%E5%9B%A0"><span class="nav-number">1.</span> <span class="nav-text">起因</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%A7%E8%87%B4%E6%80%9D%E8%B7%AF"><span class="nav-number">2.</span> <span class="nav-text">大致思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E7%BC%96%E8%AF%91%E5%A4%9A%E5%A5%97-css-%E8%BE%93%E5%87%BA%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">3.</span> <span class="nav-text">解决编译多套 css 输出的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8D%E8%AE%A9-css-%E6%B3%A8%E5%85%A5-html"><span class="nav-number">4.</span> <span class="nav-text">不让 css 注入 html</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="nav-number">4.1.</span> <span class="nav-text">方法一（不推荐）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="nav-number">4.2.</span> <span class="nav-text">方法二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%B8%89"><span class="nav-number">4.3.</span> <span class="nav-text">方法三</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Godfery" src="/uploads/head.jpg"><p class="site-author-name" itemprop="name">Godfery</p><div class="site-description" itemprop="description">Godfery的博客</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">22</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">11</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">33</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/hiyangguo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hiyangguo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://juejin.im/user/5651d4a860b2ed3620acfaed" title="掘金 → https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;5651d4a860b2ed3620acfaed" rel="noopener" target="_blank"><i class="fas fa-code fa-fw"></i> 掘金</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://wangchujiang.com/FED/" title="https:&#x2F;&#x2F;wangchujiang.com&#x2F;FED&#x2F;" rel="noopener" target="_blank">JSDig</a></li><li class="links-of-blogroll-item"> <a href="https://docschina.org/" title="https:&#x2F;&#x2F;docschina.org&#x2F;" rel="noopener" target="_blank">印记中文</a></li><li class="links-of-blogroll-item"> <a href="http://www.alloyteam.com/nav/" title="http:&#x2F;&#x2F;www.alloyteam.com&#x2F;nav&#x2F;" rel="noopener" target="_blank">腾讯前端导航</a></li><li class="links-of-blogroll-item"> <a href="https://godbasin.github.io/front-end-playground/" title="https:&#x2F;&#x2F;godbasin.github.io&#x2F;front-end-playground&#x2F;" rel="noopener" target="_blank">被删的前端游乐场</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/hiyangguo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://hiyangguo.com/webpack-mutiple-theme-solution-md/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/head.jpg"><meta itemprop="name" content="Godfery"><meta itemprop="description" content="Godfery的博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Godfery的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> webpack 换肤功能多主题/配色样式打包解决方案</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-04-19 19:15:52" itemprop="dateCreated datePublished" datetime="2018-04-19T19:15:52+00:00">2018-04-19</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-06-20 13:30:49" itemprop="dateModified" datetime="2022-06-20T13:30:49+00:00">2022-06-20</time></span><span id="/webpack-mutiple-theme-solution-md/" class="post-meta-item leancloud_visitors" data-flag-title="webpack 换肤功能多主题/配色样式打包解决方案" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Disqus：</span><a title="disqus" href="/webpack-mutiple-theme-solution-md/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="webpack-mutiple-theme-solution-md/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p><img src="/uploads/webpack-mutiple-theme-solution/pallete.jpg" alt="色阶"><br>本文主要详细介绍了，如何使用 <a target="_blank" rel="noopener" href="https://webpack.js.org/">webpack</a>，打包多套不同主题的解决方案以及实践中所遇到的问题及解决方案。</p><span id="more"></span><h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>首先，简单的介绍一下什么是多主题，所谓多套主题/配色，就是我们很常见的换肤功能。换肤简单来说就是更换 <code>css</code>。这是一个老生常谈的问题，具体实践请参考<a target="_blank" rel="noopener" href="https://hiyangguo.github.io/2017/03/21/less-multiple-color-theme-realize/">less 换肤功能实践</a>。本文不在赘述。<br>一般实现多主题的样式文件，我们都会借用 <a target="_blank" rel="noopener" href="https://www.gulpjs.com.cn/">gulp</a>、<a target="_blank" rel="noopener" href="https://gruntjs.com/">grunt</a>这种构建工具进行构建。但是，这样做有一个巨大的问题，就是非常不方便。我们既然已经使用了 <code>webpack</code> 进行打包，又为什么还要使用其他的构建工具呢？<br>另外，还有一个巨大的弊端就是使用其他构建工具构建的 css ，是没办法支持提供的 <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/css-loader#scope">scope</a>功能的。这非常致命。所以到底该如何使用 webpack 进行构建呢？</p><h2 id="大致思路"><a href="#大致思路" class="headerlink" title="大致思路"></a>大致思路</h2><p>新建一些 <code>&lt;theme&gt;.less</code>文件，，使用 <code>webpack</code> 读取 <code>themes</code>目录中的样式文件，编译后输出 <code>&lt;theme&gt;.css</code>。并且首次加载时只引用默认主题文件，其他的可以到切换的时候再引入。<br>所以只需要解决解决编译多套 css 输出的问题和不让 css 注入 html 的问题就好了。</p><h2 id="解决编译多套-css-输出的问题"><a href="#解决编译多套-css-输出的问题" class="headerlink" title="解决编译多套 css 输出的问题"></a>解决编译多套 css 输出的问题</h2><ul><li>建立一个<a target="_blank" rel="noopener" href="https://github.com/hiyangguo/webpack-mutiple-theme-bundle-css-demo/tree/v0.0.1">初始化的项目</a>，这个项目以<code>react</code>项目为例，预编译语言使用的是<code>less</code>。你可以随着自己的喜好进行任意选择。<a target="_blank" rel="noopener" href="https://github.com/hiyangguo/webpack-mutiple-theme-bundle-css-demo/blob/v0.0.1/webpack.config.js">初始配置</a>。然后再<code>less</code>文件夹下，新建一个<code>themes</code>目录，和多个 <code>&lt;theme&gt;.less</code>。<br><img src="/uploads/webpack-mutiple-theme-solution/themes.png" alt="目录结构"><br>建好之后，把所有的 文件引入 <code>index.js</code>中，<code>webpack</code>就会帮你把他们编译输出到一起了。一般情况下，<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/extract-text-webpack-plugin">extract-text-webpack-plugin</a> 可以帮我们把样式文件抽出来，但是会帮我们把他们都放在同一个文件中。<br>修改<code>index.js</code>。</li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./less/index.less&#x27;;</span><br><span class="line"><span class="addition">+ import &#x27;./less/themes/green.less&#x27;;</span></span><br><span class="line"><span class="addition">+ import &#x27;./less/themes/red.less&#x27;;</span></span><br><span class="line"><span class="addition">+ import &#x27;./less/themes/yellow.less&#x27;;</span></span><br></pre></td></tr></table></figure><p>然后编译一下，你发现所有的样式都混在一起了。<br><img src="/uploads/webpack-mutiple-theme-solution/mix-css.png" alt="混在一起的样式"><br>参照文档，我们需要多次声明 <code>ExtractTextPlugin</code>，以达到把不同的主题输出到不同文件的目的。这里我使用的是, <code>loader</code> 的 <code>include</code> 和 <code>exclude</code>参数。在默认样式中将其他样式排除，然后每一个主题的样式,分别打包自己的样式。<br>最终代码的改动如下：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line"><span class="addition">+ const fs = require(&#x27;fs&#x27;);</span></span><br><span class="line">const webpack = require(&#x27;webpack&#x27;);</span><br><span class="line">const ExtractTextPlugin = require(&#x27;extract-text-webpack-plugin&#x27;);</span><br><span class="line">const HtmlwebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);</span><br><span class="line"></span><br><span class="line">const &#123; STYLE_DEBUG &#125; = process.env;</span><br><span class="line"><span class="addition">+ // 主题路径</span></span><br><span class="line"><span class="addition">+ const THEME_PATH = &#x27;./src/less/themes&#x27;;</span></span><br><span class="line"></span><br><span class="line">const extractLess = new ExtractTextPlugin(&#x27;style.[hash].css&#x27;);</span><br><span class="line"></span><br><span class="line"><span class="addition">+ const styleLoaders = [&#123; loader: &#x27;css-loader&#x27; &#125;, &#123; loader: &#x27;less-loader&#x27; &#125;];</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ const resolveToThemeStaticPath = fileName =&gt; path.resolve(THEME_PATH, fileName);</span></span><br><span class="line"><span class="addition">+ const themeFileNameSet = fs.readdirSync(path.resolve(THEME_PATH));</span></span><br><span class="line"><span class="addition">+ const themePaths = themeFileNameSet.map(resolveToThemeStaticPath);</span></span><br><span class="line"><span class="addition">+ const getThemeName = fileName =&gt; `theme-$&#123;path.basename(fileName, path.extname(fileName))&#125;`;</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ // 全部 ExtractLessS 的集合</span></span><br><span class="line"><span class="addition">+ const themesExtractLessSet = themeFileNameSet.map(fileName =&gt; new ExtractTextPlugin(`$&#123;getThemeName(fileName)&#125;.css`))</span></span><br><span class="line"><span class="addition">+ // 主题 Loader 的集合</span></span><br><span class="line"><span class="addition">+ const themeLoaderSet = themeFileNameSet.map((fileName, index) =&gt; &#123;</span></span><br><span class="line"><span class="addition">+   return &#123;</span></span><br><span class="line"><span class="addition">+     test: /\.(less|css)$/,</span></span><br><span class="line"><span class="addition">+     include: resolveToThemeStaticPath(fileName),</span></span><br><span class="line"><span class="addition">+     loader: themesExtractLessSet[index].extract(&#123;</span></span><br><span class="line"><span class="addition">+       use: styleLoaders</span></span><br><span class="line"><span class="addition">+     &#125;)</span></span><br><span class="line"><span class="addition">+   &#125;</span></span><br><span class="line"><span class="addition">+ &#125;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//</span><br><span class="line">//..... 这里省略了</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        use: [</span><br><span class="line">          &#x27;transform-loader?brfs&#x27;, // Use browserify transforms as webpack-loader.</span><br><span class="line">          &#x27;babel-loader?babelrc&#x27;</span><br><span class="line">        ],</span><br><span class="line">        exclude: /node_modules/</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.(less|css)$/,</span><br><span class="line">        exclude: themePaths,</span><br><span class="line">        loader: extractLess.extract(&#123;</span><br><span class="line"><span class="deletion">-          use: [</span></span><br><span class="line"><span class="deletion">-            &#123;</span></span><br><span class="line"><span class="deletion">-              loader: &#x27;css-loader&#x27;,</span></span><br><span class="line"><span class="deletion">-            &#125;, &#123;</span></span><br><span class="line"><span class="deletion">-              loader: &#x27;less-loader&#x27;</span></span><br><span class="line"><span class="deletion">-            &#125;</span></span><br><span class="line"><span class="deletion">-          ],</span></span><br><span class="line"><span class="addition">+          use: styleLoaders,</span></span><br><span class="line">          // use style-loader in development</span><br><span class="line">          fallback: &#x27;style-loader?&#123;attrs:&#123;prop: &quot;value&quot;&#125;&#125;&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.html$/,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: &#x27;html-loader&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="addition">+      ...themeLoaderSet</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    extractLess,</span><br><span class="line"><span class="addition">+    ...themesExtractLessSet,</span></span><br><span class="line">    new webpack.NamedModulesPlugin(),</span><br><span class="line">    new HtmlwebpackPlugin(&#123;</span><br><span class="line">      title: &#x27;webpack 多主题打包演示&#x27;,</span><br><span class="line">      template: &#x27;src/index.html&#x27;,</span><br><span class="line">      inject: true</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  devtool: STYLE_DEBUG <span class="comment">=== &#x27;SOURCE&#x27; &amp;&amp; &#x27;source-map&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>做出以上改动之后，就可以正常的输出样式文件了。<br><img src="/uploads/webpack-mutiple-theme-solution/first-build.png" alt="第一次构建"></p><p><a target="_blank" rel="noopener" href="https://github.com/hiyangguo/webpack-mutiple-theme-bundle-css-demo/commit/1509f94524626331731893253aec2d2ce6936911">详细的代码改动</a>在这里，并且有详细的注释。</p><h2 id="不让-css-注入-html"><a href="#不让-css-注入-html" class="headerlink" title="不让 css 注入 html"></a>不让 css 注入 html</h2><p>这样做之后，虽然 <code>webpack</code> 可以正常的编译样式文件了，但是有一个致命的问题。让我们看看现在的<code>&lt;head/&gt;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack 多主题打包演示页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/resources/loading.css&quot;</span> /&gt;</span></span><br><span class="line">  &lt;link</span><br><span class="line">    rel=&quot;stylesheet&quot;</span><br><span class="line">    href=&quot;https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">  &lt;script</span><br><span class="line">    type=&quot;text/javascript&quot;</span><br><span class="line">    src=&quot;//cdn.staticfile.org/babel-standalone/6.24.0/babel.min.js&quot;</span><br><span class="line">  &gt;<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.polyfill.io/v2/polyfill.min.js?features=default|gated,Array.prototype.includes&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/style.984c33e9f2d50d6db720.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/theme-green.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/theme-red.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/theme-yellow.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure><p>我们发现不仅注入了<code>style.css</code>同时注入了所有的<code>theme.css</code>。这显然不是我们想要的。所以有什么办法把多余的主题去掉呢？</p><h3 id="方法一（不推荐）"><a href="#方法一（不推荐）" class="headerlink" title="方法一（不推荐）"></a>方法一（不推荐）</h3><p>用<code>node</code>写一个脚本，读取<code>html</code>，然后移除。这样又与我们最开始的初衷相违背，还是借助了其他的外力。</p><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/extract-text-webpack-plugin">extract-text-webpack-plugin</a> 提供了一个 <code>excludeChunks</code>方法，可以用来排除 <code>entry</code> 。所以我们可以把所有的样式文件放入，<code>themes.js</code> 中然后 在 entry 中添加 <code>themes</code>。再使用<code>excludeChunks</code>排除它就好了。</p><ul><li>删除 <code>index.js</code> 中的样式引用。</li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// style</span><br><span class="line">import &#x27;./less/index.less&#x27;;</span><br><span class="line"><span class="deletion">- import &#x27;./less/themes/green.less&#x27;;</span></span><br><span class="line"><span class="deletion">- import &#x27;./less/themes/red.less&#x27;;</span></span><br><span class="line"><span class="deletion">- import &#x27;./less/themes/yellow.less&#x27;;</span></span><br></pre></td></tr></table></figure><ul><li>创建<code>themes.js</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./less/themes/green.less&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./less/themes/red.less&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./less/themes/yellow.less&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>修改 <code>webpack.config.js</code></li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  entry: &#123;</span><br><span class="line">    app: &#x27;./src/index.js&#x27;,</span><br><span class="line"><span class="addition">+   themes: &#x27;./src/themes.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">//</span><br><span class="line">//... 省略没用的代码</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">new HtmlwebpackPlugin(&#123;</span><br><span class="line">  title: &#x27;webpack 多主题打包演示&#x27;,</span><br><span class="line">  template: &#x27;src/index.html&#x27;,</span><br><span class="line">  inject: true,</span><br><span class="line"><span class="addition">+ excludeChunks: [&#x27;themes&#x27;]</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="/uploads/webpack-mutiple-theme-solution/first-build.png" alt="使用 excludeChunks方式构建"><br>但是这时候，发现多了一个 <code>themes.bundle.js</code>文件。所以需要删除掉。修改 <code>build</code>脚本。</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;build&quot;: &quot;rm -rf dist &amp;&amp; NODE_ENV=production webpack --mode production --progress &amp;&amp; cp -R public/* ./dist/ &quot;</span><br><span class="line">&quot;build&quot;: &quot;rm -rf dist &amp;&amp; NODE_ENV=production webpack --mode production --progress &amp;&amp; cp -R public/* ./dist/ &amp;&amp; &amp;&amp; rm -rf dist/themes.bundle.js&quot;</span><br></pre></td></tr></table></figure><p>这样就大功告成了。<a target="_blank" rel="noopener" href="https://github.com/hiyangguo/webpack-mutiple-theme-bundle-css-demo/commit/90c1f24af526cd6d48bf6b095500e4ffa5c7f0e6">更改记录</a>，<a target="_blank" rel="noopener" href="https://github.com/hiyangguo/webpack-mutiple-theme-bundle-css-demo">完整代码</a></p><h3 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h3><p>但是，加了句 <code>rm -rf</code>，还是感觉有点不爽。所以在仔细的阅读了<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/extract-text-webpack-plugin">extract-text-webpack-plugin</a>文档后，我发现他提供了一个钩子函数<code>html-webpack-plugin-after-html-processing</code>。可以处理<code>html</code>。<a href="html-webpack-handle-css-inject-plugin-js">HtmlWebpackHandleCssInjectPlugin.js</a>（<strong>支持<code>webpack4</code>和其他 <code>webpack</code> 版本</strong>）。<br>然后这样使用：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ const HtmlWebpackHandleCssInjectPlugin = require(&#x27;./HtmlWebpackHandleCssInjectPlugin&#x27;);</span></span><br><span class="line">//... 省略没用的代码</span><br><span class="line">  plugins: [</span><br><span class="line">    extractLess,</span><br><span class="line">    // 将所有的 themesExtractLess 加入 plugin</span><br><span class="line">    ...themesExtractLessSet,</span><br><span class="line">    new webpack.NamedModulesPlugin(),</span><br><span class="line">    new HtmlwebpackPlugin(&#123;</span><br><span class="line">      title: &#x27;webpack 多主题打包演示&#x27;,</span><br><span class="line">      template: &#x27;src/index.html&#x27;,</span><br><span class="line">      inject: true</span><br><span class="line"><span class="addition">+    &#125;),</span></span><br><span class="line"><span class="addition">+    new HtmlWebpackHandleCssInjectPlugin(&#123;</span></span><br><span class="line"><span class="addition">+      filter: (filePath) =&gt; &#123;</span></span><br><span class="line"><span class="addition">+        return filePath.includes(&#x27;style&#x27;);</span></span><br><span class="line"><span class="addition">+      &#125;</span></span><br><span class="line"><span class="addition">+    &#125;)</span></span><br><span class="line"><span class="addition">+  ],</span></span><br></pre></td></tr></table></figure><p><code>filter</code> 函数<code>Array.filer</code>用法一直。参数<code>filePath</code>参数给出的就是<code>link</code>标签中<code>[href]</code>的值。<br>这个方法，既不需要任何工具，也不需要删除什么。非常完美。<a target="_blank" rel="noopener" href="https://github.com/hiyangguo/webpack-mutiple-theme-bundle-css-demo/commit/2688cead3298b65a4e5871ead1d261b008b545a8">更改记录</a>,<a target="_blank" rel="noopener" href="https://github.com/hiyangguo/webpack-mutiple-theme-bundle-css-demo/tree/plugin">完整代码</a><br><img src="/uploads/webpack-mutiple-theme-solution/fina-build.png" alt="使用 hook方式构建"></p><p>这两种方法我个人比较倾向于方法三。由于 plugin 的代码比较简单，就不做 publish 了。需要的欢迎自取。<br>本文章所涉及的<a target="_blank" rel="noopener" href="https://github.com/hiyangguo/webpack-mutiple-theme-bundle-css-demo">源码</a>。<a href="#方法二">方法二</a>和<a href="#方法三">方法三</a>在不同的分支，<a target="_blank" rel="noopener" href="https://hiyangguo.github.io/webpack-mutiple-theme-bundle-css-demo/">点击查看最终效果</a><br><img src="/uploads/webpack-mutiple-theme-solution/final-screenshoots.gif" alt="最终效果截屏"></p><p>最后感谢<a target="_blank" rel="noopener" href="https://github.com/xiyuyizhi">@xiyuyizhi</a>提供的<a target="_blank" rel="noopener" href="https://github.com/xiyuyizhi/notes/blob/master/js/theme.md">宝贵思路</a>。<br>本文纯属原创，如有错误欢迎指正。</p></div><div class="popular-posts-header">相关文章</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/in-depth-study-font-size-line-height-and-vertical-align/" rel="bookmark">深入研究CSS字体度量及CSS 盒子</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/less-multiple-color-theme-realize/" rel="bookmark">less换肤功能实践</a></div></li></ul><footer class="post-footer"><div class="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button onclick='document.querySelector(".post-reward").classList.toggle("active")'> 赞赏</button><div class="post-reward"><div> <img src="/path/to/wechat-reward-image.png" alt="Godfery 微信"> <span>微信</span></div><div> <img src="/path/to/alipay-reward-image.png" alt="Godfery 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>原作者：</strong> <a target="_blank" rel="noopener" href="https://github.com/hiyangguo">Godfery</a></li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="http://hiyangguo.com/webpack-mutiple-theme-solution-md/" title="webpack 换肤功能多主题&#x2F;配色样式打包解决方案">http://hiyangguo.com/webpack-mutiple-theme-solution-md/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="post-tags"> <a href="/tags/css/" rel="tag"># css</a> <a href="/tags/less/" rel="tag"># less</a> <a href="/tags/webpack/" rel="tag"># webpack</a> <a href="/tags/%E6%8D%A2%E8%82%A4/" rel="tag"># 换肤</a></div><div class="post-nav"><div class="post-nav-item"><a href="/in-depth-study-font-size-line-height-and-vertical-align/" rel="prev" title="深入研究CSS字体度量及CSS 盒子"><i class="fa fa-chevron-left"></i> 深入研究CSS字体度量及CSS 盒子</a></div><div class="post-nav-item"> <a href="/install-docker-on-centos/" rel="next" title="在 centos 安装 docker">在 centos 安装 docker<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="disqus_thread"><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script src="/js/comments.js"></script></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2016 – <span itemprop="copyrightYear">2022</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Godfery</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/third-party/search/local-search.js"></script><script class="next-config" data-name="nprogress" type="application/json">{&quot;enable&quot;:true,&quot;spinner&quot;:true}</script><script src="/js/third-party/nprogress.js"></script><script class="next-config" data-name="leancloud_visitors" type="application/json">{&quot;enable&quot;:true,&quot;app_id&quot;:&quot;2jwVI58glS0nRFUd0v7YwmSE-gzGzoHsz&quot;,&quot;app_key&quot;:&quot;BrxDua0t4Dci3dlvkby5JuJo&quot;,&quot;server_url&quot;:&quot;https:&#x2F;&#x2F;2jwvi58g.lc-cn-n1-shared.com&quot;,&quot;security&quot;:false}</script><script src="/js/third-party/statistics/lean-analytics.js"></script><script src="https://cdn.jsdelivr.net/npm/quicklink@2.1.0/dist/quicklink.umd.js"></script><script class="next-config" data-name="quicklink" type="application/json">{&quot;enable&quot;:true,&quot;home&quot;:false,&quot;archive&quot;:false,&quot;delay&quot;:true,&quot;timeout&quot;:3000,&quot;priority&quot;:true,&quot;ignores&quot;:null,&quot;url&quot;:&quot;http:&#x2F;&#x2F;hiyangguo.com&#x2F;webpack-mutiple-theme-solution-md&#x2F;&quot;}</script><script src="/js/third-party/quicklink.js"></script><script class="next-config" data-name="disqus" type="application/json">{&quot;enable&quot;:true,&quot;shortname&quot;:&quot;godeferyde-bo-ke&quot;,&quot;count&quot;:true,&quot;i18n&quot;:{&quot;disqus&quot;:&quot;disqus&quot;}}</script><script src="/js/third-party/comments/disqus.js"></script></body></html>